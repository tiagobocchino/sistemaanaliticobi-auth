ğŸ“š DOCUMENTAÃ‡ÃƒO TÃ‰CNICA EXEMPLIFICADA
ğŸ¯ VisÃ£o Geral do Sistema
O Analytics Platform Ã© uma soluÃ§Ã£o empresarial completa que integra:
Backend: FastAPI + Python 3.11+ com arquitetura modular
Frontend: React Native + Expo com suporte Web/Mobile
Banco de Dados: Supabase (PostgreSQL com RLS)
IA: Agno Framework com mÃºltiplos providers (Ollama, OpenAI, Groq)
Cache: Redis com fallback em memÃ³ria
Monitoramento: Sistema completo de mÃ©tricas e alertas
ğŸ—ï¸ Arquitetura TÃ©cnica
Copy
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React Native)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Screens â€¢ Components â€¢ Hooks â€¢ Context â€¢ API Client       â”‚
â”‚  Navigation â€¢ Theme â€¢ Cache â€¢ Performance                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BACKEND (FastAPI)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Auth â€¢ Users â€¢ Analyses â€¢ Agents â€¢ Monitoring â€¢ Cache     â”‚
â”‚  Middleware â€¢ Validation â€¢ Error Handling â€¢ Logging        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  DATABASE (Supabase)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL â€¢ RLS â€¢ Triggers â€¢ Functions â€¢ Indexes         â”‚
â”‚  Auth Users â€¢ Tables â€¢ Policies â€¢ Materialized Views       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SERVIÃ‡OS EXTERNOS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ollama (LLM Local) â€¢ OpenAI â€¢ Groq â€¢ Redis â€¢ Power BI     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ğŸ”§ Componentes Principais
Backend Components
Python
Copy
# Estrutura de diretÃ³rios backend/
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agents/          # Sistema de IA com tools
â”‚   â”œâ”€â”€ analyses/        # Gerenciamento de anÃ¡lises
â”‚   â”œâ”€â”€ auth/           # AutenticaÃ§Ã£o e autorizaÃ§Ã£o
â”‚   â”œâ”€â”€ cache/          # Sistema de cache
â”‚   â”œâ”€â”€ integrations/   # IntegraÃ§Ãµes externas
â”‚   â”œâ”€â”€ monitoring/     # Monitoramento e mÃ©tricas
â”‚   â”œâ”€â”€ users/          # Gerenciamento de usuÃ¡rios
â”‚   â””â”€â”€ utils/          # UtilitÃ¡rios compartilhados
â”œâ”€â”€ database/           # Scripts SQL
â”œâ”€â”€ tests/              # Testes automatizados
â””â”€â”€ main.py            # Entry point
Frontend Components
TypeScript
Copy
// Estrutura de diretÃ³rios frontend/
frontend-rn/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ screens/        # Telas da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ components/     # Componentes reutilizÃ¡veis
â”‚   â”œâ”€â”€ hooks/          # Custom hooks
â”‚   â”œâ”€â”€ context/        # Context providers
â”‚   â”œâ”€â”€ api/            # Cliente API
â”‚   â””â”€â”€ utils/          # UtilitÃ¡rios
â”œâ”€â”€ assets/             # Imagens e fontes
â””â”€â”€ App.tsx            # Entry point
ğŸ“Š Fluxo de Dados
Mermaid
Fullscreen 
Download 
Copy
Code
Preview
RequisiÃ§Ã£o

HTTP

ValidaÃ§Ã£o

Autorizado

Business Logic

Dados

JSON

UI Update

UsuÃ¡rio
Frontend RN
FastAPI Backend
Auth Middleware
Service Layer
Database/Cache
Response
âš™ï¸ ConfiguraÃ§Ã£o de Desenvolvimento
VariÃ¡veis de Ambiente
bash
Copy
# .env
# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Security
SECRET_KEY=your-super-secret-key
ENVIRONMENT=development

# LLM
OLLAMA_BASE_URL=http://localhost:11434/v1
OLLAMA_MODEL=llama3.2
USE_OLLAMA=true

# Redis (opcional)
REDIS_HOST=localhost
REDIS_PORT=6379
### RAG (recuperacao de contexto)
- Indice BM25 local em `data/rag_index.json` (sem dependencias externas).
- Gerar/atualizar: `python scripts/build_rag_index.py`.
- Variaveis: `RAG_ENABLED=true|false`, `RAG_TOP_K` (padrao 3), `RAG_INDEX_PATH` (padrao data/rag_index.json).
- Respostas do agente podem incluir `rag_sources` (debug) mostrando as fontes do RAG.
